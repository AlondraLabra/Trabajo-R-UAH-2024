"No buscó trabajo en el último tiempo"=2))
proc_data$razon <- set_labels(proc_data$razon,
labels=c( "Está en espera de una confirmación"=1,2,
"Se dedica a labores de cuidado"=3,4,5,
"Se dedica al trabajo doméstico"=10,
"Dificultades para conseguir trabajo"=6,7,8,9,14,
"Otro motivo"=15,16,17,19))
limites_edad <- c(18, 25, 35, 45, 55, Inf)
# Reetiquetar la variable "edad" utilizando los límites definidos
proc_data$edad <- cut(proc_data$edad, breaks = limites_edad, labels = c("18-24 años", "25-34 años", "35-44 años", "45-54 años", "55 o más años"), include.lowest = TRUE)
# Mostrar los niveles de la variable "edad" después de la reetiquetación
levels(proc_data$edad)
proc_data$sexo <- set_labels(proc_data$sexo,
labels=c( "Hombre"=1,
"Mujer"=2))
frq(proc_data$busc_trab)
frq(proc_data$razon)
frq(proc_data$edad)
frq(proc_data$sexo)
proc_data$busc_trab <- set_label(x = proc_data$busc_trab,label = "Buscó trabajo")
proc_data$razon <- set_label(x = proc_data$razon,label = "Razón por la que no ha buscado trabajo")
proc_data$edad <- set_label(x = proc_data$edad,label = "Edad")
proc_data$sexo <- set_label(x = proc_data$sexo,label = "Sexo")
proc_data <-as.data.frame(proc_data)
tab1 <- stargazer(proc_data, type="text")
proc_data %>% dplyr::group_by(sexo,edad) %>% summarise(mean(busc_trab, na.rm=TRUE))
proc_data %>% dplyr::group_by(sexo,edad) %>% summarise(mean(razon, na.rm=TRUE))
library(sjPlot)
install.packages("devtools")  # Si aún no está instalado
install.packages("devtools")
devtools::install_github("strengejacke/strengejacke")
library(strengejacke)
sjt.xtab(proc_data$busc_trab, proc_data$razon, encoding = "UTF-8")
install.packages("pacman")
install.packages("pacman")
library(pacman)
pacman::p_load(dplyr, sjmisc, car, sjlabelled, stargazer, haven)
library(sjPlot)
install.packages("devtools")  # Si aún no está instalado
devtools::install_github("strengejacke/strengejacke")
devtools::install_github("strengejacke/strengejacke", force = TRUE)
sjt.xtab(proc_data$razon, proc_data$edad, encoding = "UTF-8")
sjt.xtab(proc_data$razon, proc_data$edad, proc_data%sexo, encoding = "UTF-8")
sjt.xtab(proc_data$razon,proc_data%sexo, encoding = "UTF-8")
sjt.xtab(proc_data$razon, proc_data%sexo, encoding = "UTF-8")
sjt.xtab(proc_data$razon, proc_data%sexo, encoding = "UTF-8")
proc_data$razon <- set_labels(proc_data$razon,
labels=c( "Está en espera de una confirmación"=1,2,
"Se dedica a labores de cuidado"=3,4,5,
"Se dedica al trabajo doméstico"=10,
"Dificultades para conseguir trabajo"=6,7,8,9,14,
"Otro motivo"=11,12,13,15,16,17,18,19))
sjt.xtab(proc_data$razon, proc_data$edad, encoding = "UTF-8")
tab_desc <- sjt.xtab(proc_data$razon, proc_data$edad, encoding = "UTF-8")
save(proc_data,tab_desc = "[C:/Users/alond/Desktop/OFC-R/Trabajo-R-UAH-2024/PRACTICO-R2]/ELSOC_ess_merit2016.RData")
save(proc_data, tab_desc, file = ruta_archivo)
tab_desc <- sjt.xtab(proc_data$razon, proc_data$edad, encoding = "UTF-8")
ruta_archivo <- "C:/Users/alond/Desktop/OFC-R/Trabajo-R-UAH-2024/PRACTICO-R2/ELSOC_ess_merit2016.RData"
save(proc_data, tab_desc, file = ruta_archivo)
ruta_archivo <- "C:/Users/alond/Desktop/OFC-R/Trabajo-R-UAH-2024/PRACTICO-R2/output/ELSOC_ess_merit2016.RData"
save(proc_data, tab_desc, file = ruta_archivo)
proc_data$muj_trab <- rowSums(proc_data[, c("busc_trab", "sexo", "edad")], na.rm = TRUE)
summary(proc_data$muj_trab)
ggplot(proc_data, aes(x = muj_trab))
install.packages("ggplot2")
pacman::p_load(dplyr, sjmisc, car, sjlabelled, stargazer, haven, dplyr, stargazer,
summarytools, # Tablas
kableExtra, #Tablas
sjPlot, #Tablas y gráficos
corrplot, # Correlaciones
sessioninfo, # Información de la sesión de trabajo
ggpplot2)
ggplot(proc_data, aes(x = muj_trab))
ggplot2(proc_data, aes(x = muj_trab))
ggplot()
library(ggplot2)
ggplot()
ggplot(proc_data, aes(x = muj_trab))
proc_data %>% ggplot(aes(x = muj_trab)) +
geom_bar()
proc_data %>% ggplot(aes(x = conf_inst)) +
geom_bar(fill = "purple")
proc_data %>% ggplot(aes(x = conf_inst)) +
geom_bar(fill = "purple")
proc_data %>% ggplot(aes(x = conf_inst)) +
geom_bar(fill = "coral")
ggplot(proc_data, aes(x = muj_trab))
proc_data %>% ggplot(aes(x = muj_trab)) +
geom_bar()
proc_data %>% ggplot(aes(x = conf_inst)) +
geom_bar(fill = "coral")
ggplot(proc_data, aes(x = muj_trab))
proc_data %>% ggplot(aes(x = muj_trab)) +
geom_bar()
proc_data %>% ggplot(aes(x = muj_trab)) +
geom_bar(fill = "purple")
proc_data$muj_trab <- rowSums(proc_data[, c("razon", "sexo")], na.rm = TRUE)
ggplot()
ggplot(proc_data, aes(x = muj_trab))
proc_data %>% ggplot(aes(x = muj_trab)) +
geom_bar()
proc_data %>% ggplot(aes(x = muj_trab)) +
geom_bar(fill = "purple")
proc_data %>% ggplot(aes(x = conf_inst)) +
geom_bar(fill = "coral")+
labs(title = "Mujeres fuera del mercado laboral",
x = "",
y = "Frecuencia")
ggplot()
ggplot(proc_data, aes(x = muj_trab))
proc_data %>% ggplot(aes(x = muj_trab)) +
geom_bar()
proc_data %>% ggplot(aes(x = muj_trab)) +
geom_bar(fill = "purple")
proc_data %>% ggplot(aes(x = conf_inst)) +
geom_bar(fill = "coral")+
labs(title = "Mujeres fuera del mercado laboral",
x = "",
y = "Frecuencia")
proc_data %>% ggplot(aes(x = muj_trab)) +
geom_bar(fill = "purple")
proc_data$muj_trab <- rowSums(proc_data[, c("busc_trab", "sexo")], na.rm = TRUE)
summary(proc_data$muj_trab)
ggplot()
ggplot(proc_data, aes(x = muj_trab))
proc_data %>% ggplot(aes(x = muj_trab)) +
geom_bar()
proc_data %>% ggplot(aes(x = muj_trab)) +
geom_bar(fill = "purple")
proc_data %>% ggplot(aes(x = conf_inst)) +
geom_bar(fill = "coral")+
labs(title = "Mujeres fuera del mercado laboral",
x = "",
y = "Frecuencia")
proc_data %>% ggplot(aes(x = muj_trab)) +
geom_bar(fill = "purple")
proc_data %>% ggplot(aes(x = conf_inst)) +
geom_bar(fill = "coral")+
labs(title = "Mujeres fuera del mercado laboral",
x = "Búsqueda de trabajo",
y = "Sexo")
proc_data %>% ggplot(aes(x = muj_trab)) +
geom_bar(fill = "purple")+
labs(title = "Mujeres fuera del mercado laboral",
x = "Búsqueda de trabajo",
y = "Sexo")
# Recodificación de variables
proc_data$o6 <- recode(proc_data$o6, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$o7 <- recode(proc_data$o7, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$edad <- recode(proc_data$edad, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$sexo <- recode(proc_data$sexo, "-2=NA; -1=NA; 1=Hombre; 2=Mujer")
install.packages("pacman")
install.packages("pacman")
library(pacman)
pacman::p_load(dplyr, sjmisc, car, sjlabelled, stargazer, haven, dplyr, stargazer,
summarytools, # Tablas
kableExtra, #Tablas
sjPlot, #Tablas y gráficos
corrplot, # Correlaciones
sessioninfo, # Información de la sesión de trabajo
ggpplot2)
library(sjPlot)
install.packages("devtools")  # Si aún no está instalado
install.packages("devtools")
devtools::install_github("strengejacke/strengejacke", force = TRUE)
# Creación de la variable "muj_trab"
proc_data$muj_trab <- ifelse(proc_data$sexo == "Mujer", proc_data$busc_trab, NA)
# Guardar los datos procesados
write.csv(proc_data, file = "C:/Users/alond/Desktop/OFC-R/Trabajo-R-UAH-2024/PRACTICO-R2/output/proc_data.csv", row.names = FALSE)
# Crear tabla cruzada
tab_desc <- sjt.xtab(proc_data$razon, proc_data$edad, encoding = "UTF-8")
# Creación de la variable "muj_trab"
proc_data$muj_trab <- ifelse(proc_data$sexo == "Mujer", proc_data$busc_trab, NA)
# Crear tabla cruzada
tab_desc <- sjt.xtab(proc_data$razon, proc_data$edad, encoding = "UTF-8")
ruta_archivo <- "C:/Users/alond/Desktop/OFC-R/Trabajo-R-UAH-2024/PRACTICO-R2/output/ELSOC_ess_merit2016.RData"
save(proc_data, tab_desc, file = ruta_archivo)
# Crear gráfico de barras
ggplot(proc_data, aes(x = muj_trab, fill = sexo)) +
geom_bar() +
labs(title = "Mujeres fuera del mercado laboral",
x = "Búsqueda de trabajo",
y = "Cantidad") +
scale_fill_manual(values = c("Hombre" = "blue", "Mujer" = "pink"))
proc_data$o6 <- recode(proc_data$o6, "c(-2,-1)=NA")
proc_data$o7 <- recode(proc_data$o7, "c(-2,-1)=NA")
proc_data$edad <- recode(proc_data$edad, "c(-2,-1)=NA")
proc_data$o6 <- recode(proc_data$o6, "c(-2,-1)=NA")
proc_data$o7 <- recode(proc_data$o7, "c(-2,-1)=NA")
proc_data$edad <- recode(proc_data$edad, "c(-2,-1)=NA")
proc_data$sexo <- recode(proc_data$sexo, "c(-2,-1)=NA")
proc_data <- proc_data %>%
set_na(., na = c(-2, -1))
proc_data$o6 <- recode(proc_data$o6, "1=3; 2=2; 3=1; 4=0")
proc_data$o7 <- recode(proc_data$o7, "1=3; 2=2; 3=1; 4=0")
proc_data$edad <- recode(proc_data$edad, "1=3; 2=2; 3=1; 4=0")
proc_data$sexo <- recode(proc_data$sexo, "1=3; 2=2; 3=1; 4=0")
proc_data <- proc_data %>%
rename(busc_trab = o6,
razon = o7)
proc_data$busc_trab <- set_label(x = proc_data$busc_trab, label = "Búsqueda de trabajo")
get_label(proc_data$busc_trab)
proc_data$razon <- set_label(x = proc_data$razon, label = "Por qué no ha buscado")
get_label(proc_data$razon)
proc_data$muj_trab <- rowSums(proc_data[, c("busc_trab", "sexo")], na.rm = TRUE)
summary(proc_data$muj_trab)
frq(proc_data$busc_trab)
frq(proc_data$razon)
frq(proc_data$edad)
frq(proc_data$sexo)
proc_data$busc_trab <- set_labels(proc_data$busc_trab,
labels=c( "Buscó trabajo en el último tiempo"=1,
"No buscó trabajo en el último tiempo"=2))
proc_data$razon <- set_labels(proc_data$razon,
labels=c( "Está en espera de una confirmación"=1,2,
"Se dedica a labores de cuidado"=3,4,5,
"Se dedica al trabajo doméstico"=10,
"Dificultades para conseguir trabajo"=6,7,8,9,14,
"Otro motivo"=11,12,13,15,16,17,18,19))
limites_edad <- c(18, 25, 35, 45, 55, Inf)
# Reetiquetar la variable "edad" utilizando los límites definidos
proc_data$edad <- cut(proc_data$edad, breaks = limites_edad, labels = c("18-24 años", "25-34 años", "35-44 años", "45-54 años", "55 o más años"), include.lowest = TRUE)
# Mostrar los niveles de la variable "edad" después de la reetiquetación
levels(proc_data$edad)
proc_data$sexo <- set_labels(proc_data$sexo,
labels=c( "Hombre"=1,
"Mujer"=2))
frq(proc_data$busc_trab)
frq(proc_data$razon)
frq(proc_data$edad)
frq(proc_data$sexo)
proc_data$busc_trab <- set_label(x = proc_data$busc_trab,label = "Buscó trabajo")
proc_data$razon <- set_label(x = proc_data$razon,label = "Razón por la que no ha buscado trabajo")
proc_data$edad <- set_label(x = proc_data$edad,label = "Edad")
proc_data$sexo <- set_label(x = proc_data$sexo,label = "Sexo")
proc_data <-as.data.frame(proc_data)
tab1 <- stargazer(proc_data, type="text")
proc_data %>% dplyr::group_by(sexo,edad) %>% summarise(mean(busc_trab, na.rm=TRUE))
proc_data %>% dplyr::group_by(sexo,edad) %>% summarise(mean(razon, na.rm=TRUE))
tab_desc <- sjt.xtab(proc_data$razon, proc_data$edad, encoding = "UTF-8")
ruta_archivo <- "C:/Users/alond/Desktop/OFC-R/Trabajo-R-UAH-2024/PRACTICO-R2/output/ELSOC_ess_merit2016.RData"
save(proc_data, tab_desc, file = ruta_archivo)
library(ggplot2)
ggplot()
ggplot(proc_data, aes(x = muj_trab))
proc_data %>% ggplot(aes(x = muj_trab)) +
geom_bar()
proc_data %>% ggplot(aes(x = muj_trab)) +
geom_bar(fill = "purple")
proc_data %>% ggplot(aes(x = muj_trab)) +
geom_bar(fill = "purple")+
labs(title = "Mujeres fuera del mercado laboral",
x = "Búsqueda de trabajo",
y = "Sexo")
proc_data %>% ggplot(aes(x = muj_trab)) +
geom_bar(fill = "purple")+
labs(title = "Mujeres fuera del mercado laboral",
x = "Búsqueda de trabajo",
y = "Sexo")
rm(list=ls())       # borrar todos los objetos en el espacio de trabajo
options(scipen=999) # valores sin notación científica
library(haven)
base <- read_stata("C:/Users/alond/Desktop/OFC-R/Trabajo-R-UAH-2024/PRACTICO-R2/input/Base de datos Casen 2022 STATA_18 marzo 2024.dta.zip")
View(base)
install.packages("pacman")
library(pacman)
pacman::p_load(dplyr, sjmisc, car, sjlabelled, stargazer, haven, dplyr, stargazer,
summarytools, # Tablas
kableExtra, #Tablas
sjPlot, #Tablas y gráficos
corrplot, # Correlaciones
sessioninfo,
ggpplot2)
pacman::p_load(dplyr, sjmisc, car, sjlabelled, stargazer, haven, dplyr, stargazer,
summarytools, # Tablas
kableExtra, #Tablas
sjPlot, #Tablas y gráficos
corrplot, # Correlaciones
sessioninfo,
ggplot2)
library(sjPlot)
install.packages("devtools")  # Si aún no está instalado
install.packages("devtools")
library(strengejacke)
proc_data <- base %>%
select(o6, o7, sexo, edad)
names(proc_data)
sjlabelled::get_label(base)
frq(proc_data$o6)
frq(proc_data$o7)
frq(proc_data$sexo)
frq(proc_data$edad)
# Recodificación de variables
proc_data$o6 <- recode(proc_data$o6, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$o7 <- recode(proc_data$o7, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$edad <- recode(proc_data$edad, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$sexo <- recode(proc_data$sexo, "-2=NA; -1=NA; 1=Hombre; 2=Mujer")
proc_data$sexo <- recode(proc_data$sexo, "-2=NA; -1=NA; 1=Hombre; 2='Mujer'")
proc_data$sexo <- recode(proc_data$sexo, "-2=NA; -1=NA; 1=Hombre; 2='Mujer'")
# Convertir la variable "sexo" a tipo character
proc_data$sexo <- as.character(proc_data$sexo)
# Recodificar la variable "sexo"
proc_data$sexo <- recode(proc_data$sexo, "-2='NA'; -1='NA'; 1='Hombre'; 2='Mujer'")
# Creación de la variable "muj_trab"
proc_data$muj_trab <- ifelse(proc_data$sexo == "Mujer", proc_data$busc_trab, NA)
proc_data$busc_trab <- set_label(x = proc_data$busc_trab, label = "Búsqueda de trabajo")
get_label(proc_data$busc_trab)
proc_data$o6 <- recode(proc_data$o6, "-2='NA'; -1='NA'; 1=3; 2=2; 3=1; 4=0")
proc_data$o7 <- recode(proc_data$o7, "-2='NA'; -1='NA'; 1=3; 2=2; 3=1; 4=0")
proc_data$edad <- recode(proc_data$edad, "-2='NA'; -1='NA'; 1=3; 2=2; 3=1; 4=0")
proc_data$sexo <- recode(proc_data$sexo, "-2='NA'; -1='NA'; 1='Hombre'; 2='Mujer'")
proc_data <- proc_data %>%
set_na(na = c(-2, -1))
proc_data <- proc_data %>%
mutate(across(everything(), as.factor))  # Convertir todas las columnas a factores
proc_data <- proc_data %>%
rename(busc_trab = o6,
razon = o7)
proc_data$busc_trab <- set_label(x = proc_data$busc_trab, label = "Búsqueda de trabajo")
proc_data$razon <- set_label(x = proc_data$razon, label = "Por qué no ha buscado")
proc_data$edad <- set_label(x = proc_data$edad, label = "Edad")
proc_data$sexo <- set_label(x = proc_data$sexo, label = "Sexo")
proc_data$muj_trab <- rowSums(proc_data[, c("busc_trab", "sexo")], na.rm = TRUE)
proc_data$busc_trab <- set_labels(proc_data$busc_trab,
labels = c("Buscó trabajo en el último tiempo" = 1,
"No buscó trabajo en el último tiempo" = 2))
proc_data$razon <- set_labels(proc_data$razon,
labels = c("Está en espera de una confirmación" = 1, 2,
"Se dedica a labores de cuidado" = 3, 4, 5,
"Se dedica al trabajo doméstico" = 10,
"Dificultades para conseguir trabajo" = 6, 7, 8, 9, 14,
"Otro motivo" = 11, 12, 13, 15, 16, 17, 18, 19))
limites_edad <- c(18, 25, 35, 45, 55, Inf)
proc_data$edad <- cut(proc_data$edad, breaks = limites_edad, labels = c("18-24 años", "25-34 años", "35-44 años", "45-54 años", "55 o más años"), include.lowest = TRUE)
proc_data$sexo <- set_labels(proc_data$sexo,
labels = c("Hombre" = 1,
"Mujer" = 2))
proc_data <- as.data.frame(proc_data)
tab1 <- stargazer(proc_data, type = "text")
proc_data %>% dplyr::group_by(sexo, edad) %>% summarise(mean(busc_trab, na.rm = TRUE))
proc_data %>% dplyr::group_by(sexo, edad) %>% summarise(mean(razon, na.rm = TRUE))
tab_desc <- sjt.xtab(proc_data$razon, proc_data$edad, encoding = "UTF-8")
ruta_archivo <- "C:/Users/alond/Desktop/OFC-R/Trabajo-R-UAH-2024/PRACTICO-R2/output/ELSOC_ess_merit2016.RData"
save(proc_data, tab_desc, file = ruta_archivo)
ggplot(proc_data, aes(x = muj_trab, fill = sexo)) +
geom_bar() +
labs(title = "Mujeres fuera del mercado laboral",
x = "Búsqueda de trabajo",
y = "Cantidad") +
scale_fill_manual(values = c("Hombre" = "blue", "Mujer" = "pink"))
# Seleccionar variables de interés
proc_data <- base %>%
select(o6, o7, sexo, edad)
# Correcciones en la recodificación de variables
proc_data$o6 <- recode(proc_data$o6, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$o7 <- recode(proc_data$o7, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$edad <- recode(proc_data$edad, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$sexo <- recode(proc_data$sexo, "-2='NA'; -1='NA'; 1='Hombre'; 2='Mujer'")
proc_data$sexo <- recode(proc_data$sexo, "-2='NA'; -1='NA'; 1='Hombre'; 2='Mujer'")
View(proc_data)
proc_data$o7 <- recode(proc_data$o7, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$edad <- recode(proc_data$edad, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$sexo <- recode(proc_data$sexo, "-2='NA'; -1='NA'; 1='Hombre'; 2='Mujer'")
proc_data$sexo <- recode(proc_data$sexo, "-2='NA'; -1='NA'; 1=Hombre; 2=Mujer")
proc_data$sexo <- recode(proc_data$sexo, "-2='NA'; -1='NA'; 1="Hombre""; 2="Mujer")
proc_data$sexo <- recode(proc_data$sexo, "-2='NA'; -1='NA'; 1="Hombre"; 2="Mujer")
proc_data$sexo <- recode(proc_data$sexo, "-2='NA'; -1='NA'; 1="1. Hombre"; 2="2. Mujer")
proc_data$sexo <- recode(proc_data$sexo, "-2='NA'; -1='NA'; 1='Hombre'; 2='Mujer'")
proc_data$sexo <- as.character(proc_data$sexo)  # Convertir la columna 'sexo' a tipo character
proc_data$sexo <- recode(proc_data$sexo, "-2='NA'; -1='NA'; 1='Hombre'; 2='Mujer'")
# Crear variable "muj_trab" y guardar datos procesados
proc_data$muj_trab <- ifelse(proc_data$sexo == "Mujer", proc_data$o6, NA)
write.csv(proc_data, file = "C:/Users/alond/Desktop/OFC-R/Trabajo-R-UAH-2024/PRACTICO-R2/output/proc_data.csv", row.names = FALSE)
# Crear tabla cruzada
tab_desc <- sjt.xtab(proc_data$o7, proc_data$edad, encoding = "UTF-8")
ruta_archivo <- "C:/Users/alond/Desktop/OFC-R/Trabajo-R-UAH-2024/PRACTICO-R2/output/ELSOC_ess_merit2016.RData"
save(proc_data, tab_desc, file = ruta_archivo)
# Crear gráfico de barras
ggplot(proc_data, aes(x = muj_trab, fill = sexo)) +
geom_bar() +
labs(title = "Mujeres fuera del mercado laboral",
x = "Búsqueda de trabajo",
y = "Cantidad") +
scale_fill_manual(values = c("Hombre" = "blue", "Mujer" = "pink"))
# Recodificar variables y etiquetarlas
proc_data <- proc_data %>%
mutate(across(starts_with("o"), ~ recode(., "c(-2,-1)=NA; 1=3; 2=2; 3=1; 4=0"))) %>%
set_na(na = c(-2, -1)) %>%
rename(busc_trab = o6, razon = o7) %>%
mutate_at(vars(busc_trab, razon), set_labels, labels = c("Buscó trabajo en el último tiempo" = 1, "No buscó trabajo en el último tiempo" = 2)) %>%
mutate_at(vars(razon), set_labels, labels = c("Está en espera de una confirmación" = 1:2, "Se dedica a labores de cuidado" = 3:5, "Se dedica al trabajo doméstico" = 10, "Dificultades para conseguir trabajo" = 6:9, "Otro motivo" = 11:19)) %>%
mutate(edad = cut(edad, c(18, 25, 35, 45, 55, Inf), labels = c("18-24 años", "25-34 años", "35-44 años", "45-54 años", "55 o más años"), include.lowest = TRUE)) %>%
mutate(sexo = set_labels(sexo, labels = c("Hombre" = 1, "Mujer" = 2)))
# Etiquetar variables
proc_data <- proc_data %>%
rename_with(~ tolower(gsub("o", "", .x)), starts_with("o")) %>%
set_labels(busc_trab = "Búsqueda de trabajo", razon = "Por qué no ha buscado", edad = "Edad", sexo = "Sexo")
# Mostrar resúmenes agrupados
proc_data %>%
group_by(sexo, busc_trab) %>%
summarise(mean(busc_trab, na.rm = TRUE)) %>%
group_by(sexo, edad) %>%
summarise(mean(razon, na.rm = TRUE))
## asi que probaré con el siguiente
graph3 <- proc_data %>% ggplot(aes(x = busc_trab, fill = sexo)) +
geom_bar() +
xlab("Búsqueda de trabajo") +
ylab("Cantidad") +
labs(fill = "Sexo") +
scale_fill_discrete(labels = c('Hombre', 'Mujer'))
graph3
# Correcciones en la recodificación de variables
# Recodificar la variable busc_trab
proc_data$busc_trab <- recode(proc_data$busc_trab,
"1='Sí';
2='No';
NA='No responde'")
proc_data$o6 <- recode(proc_data$o6, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$o6 <- recode(proc_data$o6, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$o6 <- recode(proc_data$o6, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$o6 <- recode(proc_data$o6, "-2=NA; -1=NA; 1='Sí'; 2='No'; 3='No'; 4='No'")
rm(list=ls())       # borrar todos los objetos en el
rm(list=ls())       # borrar todos los objetos en el espacio de trabajo
options(scipen=999) # valores sin notación científica
library(haven)
base <- read_stata("C:/Users/alond/Desktop/OFC-R/Trabajo-R-UAH-2024/PRACTICO-R2/input/Base de datos Casen 2022 STATA_18 marzo 2024.dta.zip")
View(base)
# Seleccionar variables de interés
proc_data <- base %>%
select(o6, o7, sexo, edad)
proc_data$o6 <- recode(proc_data$o6, "-2=NA; -1=NA; 1='Sí'; 2='No'; 3='No'; 4='No'")
proc_data$o7 <- recode(proc_data$o7, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$edad <- recode(proc_data$edad, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$sexo <- as.character(proc_data$sexo)  # Convertir la columna 'sexo' a tipo character
# Convertir la columna 'o6' a tipo character antes de recodificar
proc_data$o6 <- as.character(proc_data$o6)
# Recodificar la variable o6
proc_data$o6 <- recode(proc_data$o6, "-2='NA'; -1='NA'; 1='Sí'; 2='No'; 3='No'; 4='No'")
proc_data$o6 <- recode(proc_data$o6, "-2=NA; -1=NA; 1='Sí'; 2='No'; 3='No'; 4='No'")
proc_data$o7 <- recode(proc_data$o7, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$edad <- recode(proc_data$edad, "-2=NA; -1=NA; 1=3; 2=2; 3=1; 4=0")
proc_data$sexo <- as.character(proc_data$sexo)  # Convertir la columna 'sexo' a tipo character
proc_data$sexo <- recode(proc_data$sexo, "-2='NA'; -1='NA'; 1='Hombre'; 2='Mujer'")
# Crear variable "muj_trab" y guardar datos procesados
proc_data$muj_trab <- ifelse(proc_data$sexo == "Mujer", proc_data$o6, NA)
write.csv(proc_data, file = "C:/Users/alond/Desktop/OFC-R/Trabajo-R-UAH-2024/PRACTICO-R2/output/proc_data.csv", row.names = FALSE)
# Crear tabla cruzada
tab_desc <- sjt.xtab(proc_data$o7, proc_data$edad, encoding = "UTF-8")
ruta_archivo <- "C:/Users/alond/Desktop/OFC-R/Trabajo-R-UAH-2024/PRACTICO-R2/output/ELSOC_ess_merit2016.RData"
save(proc_data, tab_desc, file = ruta_archivo)
# Crear gráfico de barras
ggplot(proc_data, aes(x = muj_trab, fill = sexo)) +
geom_bar() +
labs(title = "Mujeres fuera del mercado laboral",
x = "Búsqueda de trabajo",
y = "Cantidad") +
scale_fill_manual(values = c("Hombre" = "blue", "Mujer" = "pink"))
# Recodificar variables y etiquetarlas
proc_data <- proc_data %>%
mutate(across(starts_with("o"), ~ recode(., "c(-2,-1)=NA; 1=3; 2=2; 3=1; 4=0"))) %>%
set_na(na = c(-2, -1)) %>%
rename(busc_trab = o6, razon = o7) %>%
mutate_at(vars(busc_trab, razon), set_labels, labels = c("Buscó trabajo en el último tiempo" = 1, "No buscó trabajo en el último tiempo" = 2)) %>%
mutate_at(vars(razon), set_labels, labels = c("Está en espera de una confirmación" = 1:2, "Se dedica a labores de cuidado" = 3:5, "Se dedica al trabajo doméstico" = 10, "Dificultades para conseguir trabajo" = 6:9, "Otro motivo" = 11:19)) %>%
mutate(edad = cut(edad, c(18, 25, 35, 45, 55, Inf), labels = c("18-24 años", "25-34 años", "35-44 años", "45-54 años", "55 o más años"), include.lowest = TRUE)) %>%
mutate(sexo = set_labels(sexo, labels = c("Hombre" = 1, "Mujer" = 2)))
# Etiquetar variables
proc_data <- proc_data %>%
rename_with(~ tolower(gsub("o", "", .x)), starts_with("o")) %>%
set_labels(busc_trab = "Búsqueda de trabajo", razon = "Por qué no ha buscado", edad = "Edad", sexo = "Sexo")
sjt.xtab(proc_data$razon, proc_data$busc_trab, encoding = "UTF-8")
sjt.xtab(proc_data$razon, proc_data$sexo, encoding = "UTF-8")
proc_data$razon <- set_labels(proc_data$razon,
labels=c( "Está en espera de una confirmación"=1,2,
"Se dedica a labores de cuidado"=3,4,5,
"Se dedica al trabajo doméstico"=10,
"Dificultades para conseguir trabajo"=6,7,8,9,14,
"Otro motivo"=11,12,13,15,16,17,18,19))
sjt.xtab(proc_data$razon, proc_data$sexo, encoding = "UTF-8")
library(gt)
tabla <- sjt.xtab(proc_data$razon, proc_data$sexo, encoding = "UTF-8")
gtsave(tabla, "ruta_archivo/tabla.pdf")
save(tabla, "ruta_archivo/tabla.pdf")
tabla <- sjt.xtab(proc_data$razon, proc_data$sexo, encoding = "UTF-8")
save(tabla, "ruta_archivo/tabla.pdf")
# Guardar la tabla en formato PDF
pdf("ruta_archivo/tabla.pdf")
print(tabla)
dev.off()
View(tabla)
View(tab_desc)
write.csv(proc_data, file = "C:/Users/alond/Desktop/OFC-R/Trabajo-R-UAH-2024/PRACTICO-R2/input/proc_data.csv", row.names = FALSE)
# Crear variable "muj_trab" y guardar datos procesados
proc_data$muj_trab <- ifelse(proc_data$sexo == "Mujer", proc_data$o6, NA)
library(pacman)
p_load(dplyr, sjmisc, car, sjlabelled, stargazer, haven, summarytools, kableExtra, sjPlot, corrplot, sessioninfo, ggplot2)
# Instalar y cargar devtools
install.packages("devtools")
install.packages("devtools")
devtools::install_github("strengejacke/strengejacke", force = TRUE)
options(scipen=999) # valores sin notación científica
rm(list=ls())       # borrar todos los objetos en el espacio de trabajo
options(scipen=999) # valores sin notación científica
library(haven)
base <- read_stata("C:/Users/alond/Desktop/OFC-R/Trabajo-R-UAH-2024/PRACTICO-R2/input/Base de datos Casen 2022 STATA_18 marzo 2024.dta.zip")
View(base)
library(pacman)
p_load(dplyr, sjmisc, car, sjlabelled, stargazer, haven, summarytools, kableExtra, sjPlot, corrplot, sessioninfo, ggplot2)
# Instalar y cargar devtools
install.packages("devtools")
install.packages("devtools")
devtools::install_github("strengejacke/strengejacke", force = TRUE)
